[{"path":"https://dmurdoch.github.io/RmdConcord/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Duncan Murdoch. Author, maintainer. Heather Turner. Contributor.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Murdoch D (2023). RmdConcord: Concordances 'R Markdown'. R package version 0.2.1,  https://dmurdoch.github.io/RmdConcord/, https://github.com/dmurdoch/RmdConcord.","code":"@Manual{,   title = {RmdConcord: Concordances for 'R Markdown'},   author = {Duncan Murdoch},   year = {2023},   note = {R package version 0.2.1,  https://dmurdoch.github.io/RmdConcord/},   url = {https://github.com/dmurdoch/RmdConcord}, }"},{"path":"https://dmurdoch.github.io/RmdConcord/index.html","id":"rmdconcord","dir":"","previous_headings":"","what":"Concordances for R Markdown","title":"Concordances for R Markdown","text":"goal RmdConcord provide support concordances R Markdown files. based suggestion initial code Heather Turner. Thanks! Rmarkdown files (type .Rmd) allow presentation articles generated simple text documents. However, errors, can difficult track back originating markdown text often intermediate stages: R Markdown file converted plain Markdown, plain Markdown converted HTML LaTeX, LaTeX converted PDF. concordance allows back-tracking errors later steps needed. main use HTML output help deciphering HTML Tidy error messages. replace original driver RmdConcord::html_documentC, R CMD check report locations original .Rmd file. PDF output using patchDVI::pdf_documentC (patchDVI version 1.11.0 newer), Synctex output enabled, patched refer .Rmd file. helpful previewers like one TeXworks can link source preview. package contains RmdConcord::pdf_documentC0, part work (preparing concordance records) doesn’t patching make previewers work .","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/index.html","id":"limitations","dir":"","previous_headings":"","what":"Limitations","title":"Concordances for R Markdown","text":"Pandoc Commonmark driver still development, features supported rmarkdown drivers fully supported using drivers package. present using Pandoc 2.19.2 know following missing features: Citations, e.g. [@doe99] Raw LaTeX need “fenced”, e.g. entered (\\pagebreak \\newpage macros receive special treatment, don’t need fencing long separated blank lines text .) notice others, please let know, e.g. posting issue Github site. cause errors (Markdown doesn’t ever give errors!), won’t handled properly. suggest using RmdConcord patchDVI drivers early development track obscure bugs, using rmarkdown drivers regular production.","code":"```{=latex} LaTeX ```"},{"path":"https://dmurdoch.github.io/RmdConcord/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Concordances for R Markdown","text":"version RmdConcord makes use functions released R 4.3.0. functions copied RmdConcord, package compatible older versions R. can install development version RmdConcord GitHub :","code":"# install.packages(\"devtools\") devtools::install_github(\"dmurdoch/RmdConcord\")"},{"path":"https://dmurdoch.github.io/RmdConcord/index.html","id":"example","dir":"","previous_headings":"","what":"Example","title":"Concordances for R Markdown","text":"embed concordances R Markdown HTML document, change output YAML patchDVI::html_documentC. PDF document, use patchDVI::pdf_documentC. used Sample.Rmd vignette, contains error line 23.","code":"output: patchDVI::html_documentC library(RmdConcord) example(processConcordance) #>  #> prcssC> # This example works on the file inst/sample/Sample.Rmd, #> prcssC> # which should be a copy of the vignette Sample.Rmd.  This #> prcssC> # is convenient because RStudio doesn't install vignettes by default. #> prcssC>  #> prcssC> # First, see the results without concordances: #> prcssC>  #> prcssC> library(RmdConcord) #>  #> prcssC> dir <- tempdir() #>  #> prcssC> intermediates <- tempfile() #>  #> prcssC> infile <- system.file(\"sample/Sample.Rmd\", package = \"RmdConcord\") #>  #> prcssC> outfile1 <- file.path(dir, \"html_vignette.html\") #>  #> prcssC> rmarkdown::render(infile, #> prcssC+                   intermediates_dir = intermediates, #> prcssC+                   output_file = outfile1, #> prcssC+                   quiet = TRUE) #>  #> prcssC> tidy_validate(outfile1) #>      line  col msg                                       txt               #> [1,] \"359\" \"4\" \"Error: <foobar> is not recognized!\"      \"<p><foobar><\/p>\" #> [2,] \"359\" \"4\" \"Warning: discarding unexpected <foobar>\" \"<p><foobar><\/p>\" #>  #> prcssC> # Next, see them with concordances by setting #> prcssC> # the output format to use RmdConcord::html_documentC #> prcssC> # which post-processes the document with processConcordance. #> prcssC>  #> prcssC> dir <- tempdir() #>  #> prcssC> outfile2 <- file.path(dir, \"commonmark.html\") #>  #> prcssC> rmarkdown::render(infile, #> prcssC+                   intermediates_dir = intermediates, #> prcssC+                   output_file = outfile2, #> prcssC+                   output_format = html_documentC(), #> prcssC+                   quiet = TRUE) #>  #> prcssC> tidy_validate(outfile2) #>      line  col msg                                       txt        #> [1,] \"319\" \"1\" \"Error: <foobar> is not recognized!\"      \"<foobar>\" #> [2,] \"319\" \"1\" \"Warning: discarding unexpected <foobar>\" \"<foobar>\" #>      srcFile      srcLine #> [1,] \"Sample.Rmd\" \"23\"    #> [2,] \"Sample.Rmd\" \"23\"    #>  #> prcssC> unlink(c(intermediates, outfile1, outfile2), recursive = TRUE)"},{"path":"https://dmurdoch.github.io/RmdConcord/reference/html_commonmark_document.html","id":null,"dir":"Reference","previous_headings":"","what":"R Markdown drivers to add concordance — commonmark_document","title":"R Markdown drivers to add concordance — commonmark_document","text":"drivers replace like-named rmarkdown markdown drivers ones output Commonmark rather Pandoc Markdown. Commonmark dialect Markdown.  Pandoc driver Commonmark supports output source position information. using function output driver, can get documents. replacement markdown::latex_format planned; see note .","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/html_commonmark_document.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R Markdown drivers to add concordance — commonmark_document","text":"","code":"html_documentC(sourcepos = TRUE, ...) html_vignetteC(sourcepos = TRUE, ...) pdf_documentC0(latex_engine = \"pdflatex\",            sourcepos = TRUE,            defineSconcordance = TRUE,            ...) html_formatC(options = list(sourcepos = TRUE), ...)"},{"path":"https://dmurdoch.github.io/RmdConcord/reference/html_commonmark_document.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R Markdown drivers to add concordance — commonmark_document","text":"latex_engine Command convert .tex file .pdf. defineSconcordance TRUE, insert definition \\Sconcordance macro just \\begin{document}. sourcepos Whether include source position information. options options argument pass base driver.  options$sourcepos specified, default TRUE. ... arguments pass base driver.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/html_commonmark_document.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"R Markdown drivers to add concordance — commonmark_document","text":"driver modifies standard driver rmarkdown markdown, e.g. html_documentC similar html_document, uses Commonmark adds concordances.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/html_commonmark_document.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"R Markdown drivers to add concordance — commonmark_document","text":"pdf_documentC0 function adds concordances, interpreted LaTeX PDF previewers. get happen, use patchDVI::pdf_documentC. concordances produced html_formatC tend lines underlying Commonmark processor issues source position records per paragraph. latex_formatC driver appears quite messy currently planned.  issues : commonmark support source position attributes LaTeX output allow edits parsing rendering steps.  pdf_documentC . possible strategy render first XML (keep source position attributes), convert XML LaTeX macros inserted record source positions.  However, markdown::latex_format produces final LaTeX document several steps, support two-stage rendering steps.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/html_commonmark_document.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"R Markdown drivers to add concordance — commonmark_document","text":"R Markdown output format object add concordance information.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/html_commonmark_document.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"R Markdown drivers to add concordance — commonmark_document","text":"Duncan Murdoch","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/html_with_concordance.html","id":null,"dir":"Reference","previous_headings":"","what":"Convert an R Markdown driver to one that handles concordances. — html_with_concordance","title":"Convert an R Markdown driver to one that handles concordances. — html_with_concordance","text":"functions produce new driver matches old one respects, adds argument sourcepos (possibly others). argument TRUE (default) concordances handled new driver. functions used produce html_documentC similar drivers package, also work drivers produce HTML output using Pandoc.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/html_with_concordance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Convert an R Markdown driver to one that handles concordances. — html_with_concordance","text":"","code":"html_with_concordance(driver) pdf_with_concordance(driver)"},{"path":"https://dmurdoch.github.io/RmdConcord/reference/html_with_concordance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Convert an R Markdown driver to one that handles concordances. — html_with_concordance","text":"driver R Markdown driver produces HTML, LaTeX PDF using Pandoc.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/html_with_concordance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Convert an R Markdown driver to one that handles concordances. — html_with_concordance","text":"new driver function.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/html_with_concordance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Convert an R Markdown driver to one that handles concordances. — html_with_concordance","text":"","code":"html_with_concordance(rmarkdown::html_fragment) #> function (sourcepos = TRUE, ...)  #> { #>     res <- driver(...) #>     if (test_packages(FALSE)) { #>         res$knitr$opts_knit$concordance <- sourcepos #>         if (sourcepos) { #>             res$knitr$opts_knit$out_format <- \"markdown\" #>             oldpost <- res$post_processor #>             res$post_processor <- function(metadata, input_file,  #>                 output_file, ...) { #>                 if (!is.null(oldpost))  #>                   res <- oldpost(metadata, input_file, output_file,  #>                     ...) #>                 else res <- output_file #>                 processConcordance(res, res) #>                 res #>             } #>             res$pandoc$from <- fix_pandoc_from_options(res$pandoc$from,  #>                 sourcepos) #>         } #>     } #>     res #> } #> <bytecode: 0x56120c2c9a88> #> <environment: 0x56120c2ca5c0> pdf_with_concordance(rmarkdown::latex_fragment) #> function (latex_engine = \"pdflatex\", sourcepos = TRUE, defineSconcordance = TRUE,  #>     ...)  #> { #>     test_packages() #>     res <- driver(latex_engine = latex_engine, ...) #>     res$knitr$opts_knit$concordance <- sourcepos #>     if (sourcepos) { #>         res$pandoc$from <- fix_pandoc_from_options(res$pandoc$from,  #>             sourcepos) #>         res$pandoc$lua_filters <- c(res$pandoc$lua_filters, system.file(\"rmarkdown/lua/pagebreak.lua\",  #>             package = \"RmdConcord\"), system.file(\"rmarkdown/lua/latex-datapos.lua\",  #>             package = \"RmdConcord\")) #>         res$pandoc$RmdConcord_ext <- res$pandoc$ext #>         res$pandoc$ext = \".tex\" #>         res$RmdConcord_post_processor <- res$post_processor #>         res$post_processor <- function(yaml, infile, outfile,  #>             ...) { #>             workdir <- dirname(outfile) #>             concordanceFile <- paste0(sans_ext(normalizePath(infile)),  #>                 \"-concordance.tex\") #>             origdir <- setwd(workdir) #>             on.exit(setwd(origdir)) #>             processLatexConcordance(outfile, followConcordance = concordanceFile,  #>                 defineSconcordance = defineSconcordance) #>             outfile #>         } #>     } #>     res #> } #> <bytecode: 0x56120c378eb0> #> <environment: 0x56120c37c4a0>"},{"path":"https://dmurdoch.github.io/RmdConcord/reference/processConcordance.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the concordance from the ","title":"Get the concordance from the ","text":"Pandoc can record concordance information datapos attributes converting Commonmark documents HTML.  retrieves information, rewrites standard R concordance data.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/processConcordance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the concordance from the ","text":"","code":"processConcordance(filename, newfilename = filename,                       rename = NULL,                       followConcordance = TRUE)"},{"path":"https://dmurdoch.github.io/RmdConcord/reference/processConcordance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Get the concordance from the ","text":"filename filename HTML file produced Pandoc. newfilename filename write changed data. rename named character vector.  Names names datapos attributes; values names included concordance instead. might used since knitr produces Markdown file renames later. followConcordance filename already contains concordance data, assume Rmd file produced automatically, chain concordances.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/processConcordance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the concordance from the ","text":"Called side effect rewriting concordance, returns newfilename invisibly.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/processConcordance.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Get the concordance from the ","text":"Duncan Murdoch","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/processConcordance.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get the concordance from the ","text":"","code":"# This example works on the file inst/sample/Sample.Rmd, # which should be a copy of the vignette Sample.Rmd.  This # is convenient because RStudio doesn't install vignettes by default.  # First, see the results without concordances:  library(RmdConcord) dir <- tempdir() intermediates <- tempfile()  infile <- system.file(\"sample/Sample.Rmd\", package = \"RmdConcord\") outfile1 <- file.path(dir, \"html_vignette.html\")  rmarkdown::render(infile,                   intermediates_dir = intermediates,                   output_file = outfile1,                   quiet = TRUE) tidy_validate(outfile1) #>      line  col msg                                       txt               #> [1,] \"359\" \"4\" \"Error: <foobar> is not recognized!\"      \"<p><foobar><\/p>\" #> [2,] \"359\" \"4\" \"Warning: discarding unexpected <foobar>\" \"<p><foobar><\/p>\"  # Next, see them with concordances by setting # the output format to use RmdConcord::html_documentC # which post-processes the document with processConcordance.  dir <- tempdir() outfile2 <- file.path(dir, \"commonmark.html\") rmarkdown::render(infile,                   intermediates_dir = intermediates,                   output_file = outfile2,                   output_format = html_documentC(),                   quiet = TRUE) tidy_validate(outfile2) #>      line  col msg                                       txt        #> [1,] \"319\" \"1\" \"Error: <foobar> is not recognized!\"      \"<foobar>\" #> [2,] \"319\" \"1\" \"Warning: discarding unexpected <foobar>\" \"<foobar>\" #>      srcFile      srcLine #> [1,] \"Sample.Rmd\" \"23\"    #> [2,] \"Sample.Rmd\" \"23\"    unlink(c(intermediates, outfile1, outfile2), recursive = TRUE)"},{"path":"https://dmurdoch.github.io/RmdConcord/reference/processLatexConcordance.html","id":null,"dir":"Reference","previous_headings":"","what":"Process a LaTeX concordance file. — processLatexConcordance","title":"Process a LaTeX concordance file. — processLatexConcordance","text":"Pandoc can record concordance information \\datapos macros converting Commonmark documents LaTeX.  retrieves information, rewrites standard R concordance data.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/processLatexConcordance.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Process a LaTeX concordance file. — processLatexConcordance","text":"","code":"processLatexConcordance(filename,                         newfilename = filename,                         rename = NULL,                         followConcordance = NULL,                         defineSconcordance = TRUE)"},{"path":"https://dmurdoch.github.io/RmdConcord/reference/processLatexConcordance.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Process a LaTeX concordance file. — processLatexConcordance","text":"filename filename LaTeX file produced Pandoc. newfilename filename write changed data. rename named character vector.  Names names datapos attributes; values names included concordance instead. might used since knitr produces Markdown file renames later. followConcordance filename already contains concordance data, assume Rmd file produced automatically, chain concordances. defineSconcordance Whether insert definition \\Sconcordance macro.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/processLatexConcordance.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Process a LaTeX concordance file. — processLatexConcordance","text":"Called side effect rewriting concordance, returns newfilename invisibly.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/processLatexConcordance.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Process a LaTeX concordance file. — processLatexConcordance","text":"Duncan Murdoch","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/test_packages.html","id":null,"dir":"Reference","previous_headings":"","what":"Test for sufficient versions of supporting packages — test_packages","title":"Test for sufficient versions of supporting packages — test_packages","text":"function tests presence packages support RmdConcord functions.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/test_packages.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Test for sufficient versions of supporting packages — test_packages","text":"","code":"test_packages(error = TRUE, pandoc = TRUE)"},{"path":"https://dmurdoch.github.io/RmdConcord/reference/test_packages.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Test for sufficient versions of supporting packages — test_packages","text":"error TRUE, missing requirements result error.  FALSE, result warning. pandoc Pandoc needed?","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/test_packages.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Test for sufficient versions of supporting packages — test_packages","text":"logical value indicating requirements present.  never return FALSE error  TRUE, just trigger error.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/test_packages.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Test for sufficient versions of supporting packages — test_packages","text":"","code":"test_packages() #> [1] TRUE"},{"path":"https://dmurdoch.github.io/RmdConcord/reference/tidy_validate.html","id":null,"dir":"Reference","previous_headings":"","what":"Reproduce tidy validation done in R 4.3.0. — tidy_validate","title":"Reproduce tidy validation done in R 4.3.0. — tidy_validate","text":"function taken R-devel, test use RmdConcord checking packages.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/tidy_validate.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Reproduce tidy validation done in R 4.3.0. — tidy_validate","text":"","code":"tidy_validate(f, tidy = \"tidy\")"},{"path":"https://dmurdoch.github.io/RmdConcord/reference/tidy_validate.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Reproduce tidy validation done in R 4.3.0. — tidy_validate","text":"f HTML file test. tidy name HTML Tidy executable.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/reference/tidy_validate.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Reproduce tidy validation done in R 4.3.0. — tidy_validate","text":"object showing issues file locations source file.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/news/index.html","id":"rmdconcord-021","dir":"Changelog","previous_headings":"","what":"RmdConcord 0.2.1","title":"RmdConcord 0.2.1","text":"Added support markdown::html_format() output via new html_formatC() function. Support markdown::latex_format() planned. See ?html_formatC() discussion issues.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/news/index.html","id":"rmdconcord-020","dir":"Changelog","previous_headings":"","what":"RmdConcord 0.2.0","title":"RmdConcord 0.2.0","text":"CRAN release: 2023-04-29 Check sufficient version Pandoc available.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/news/index.html","id":"rmdconcord-016","dir":"Changelog","previous_headings":"","what":"RmdConcord 0.1.6","title":"RmdConcord 0.1.6","text":"CRAN release: 2023-03-17 processConcord() example tried write protected location. concordance reading code didn’t handle Windows paths properly.","code":""},{"path":"https://dmurdoch.github.io/RmdConcord/news/index.html","id":"rmdconcord-014","dir":"Changelog","previous_headings":"","what":"RmdConcord 0.1.4","title":"RmdConcord 0.1.4","text":"CRAN release: 2023-03-13 Initial release. Added NEWS.md file track changes package.","code":""}]
